from math import *
from sympy import *

print("Ingrese el numero de ecuaciones de su sistema")

numeroEcuaciones = int(input())

print("ingrese las variables que hay en sus ecuaciones SEPARADAS POR UN ESPACIO")

variables = input()

# Se crea una lista a partir de todas las variables introducidas

variables = variables.split()

simbolos = []

# Las variables se convierten en simbolos y se agregan a nueva lista

for letra in variables:

    simbolos.append(symbols(letra))

'''
Se crean dos diccionarios, uno con la aproximacion n y otro con la aproximacion n+1, 
para comparar al momento de entrar al ciclo
'''

aproximacionVariables = {}

aproximacionVariablesAnterior = {}

'''
A las variables del promer diccionario se les asigna valor de cero 
para la iteracion inicial y al otro diccionario se le asignan valores de uno
para que se cumpla la condicion que hace que se entre en el while
'''

for letra in simbolos:
     
     aproximacionVariables[letra] = 0
     aproximacionVariablesAnterior[letra] = 1



print("Ingresa tus ecuaciones despejadas")

ecuaciones = {}

# Se crea diccionario de variables igualadas a ecuacion despejada

for letra in simbolos:
    
    print(f"Ingresa la ecuacion asociada a la variable {letra}")

    ecuacion = input()

    ecuacion = sympify(ecuacion)

    ecuaciones[letra] = ecuacion 

print(ecuaciones)

print(simbolos)

print("Ingresa con cuantos decimales de exactitud quieres los resultados")

numDecimales = int(input())

contadorCiclo = 0


while aproximacionVariablesAnterior != aproximacionVariables:

    contadorCiclo = contadorCiclo + 1
   
    print(f"ITERACION NUMERO {contadorCiclo}")

    # Asigna valor de cada variable en la iteracion anterior al diccionario correspondiente

    for variable in aproximacionVariables:

        aproximacionVariablesAnterior[variable] = aproximacionVariables[variable]
    
    # Recorre cada ecuacion despejada y la asigna a variable para ser sustituida
   
    for letra1 in ecuaciones:


        ecuacionSustituida = ecuaciones[letra1]

        # Recorre cada variable y en cada ecuacion sustituye la variable por su valor asociado

        for letra2 in simbolos:

            ecuacionSustituida = ecuacionSustituida.subs(letra2, aproximacionVariables[letra2])

            print(ecuacionSustituida)
    
        efeDeVariable = ecuacionSustituida.evalf()

        print(efeDeVariable)

        # AÃ±ade el valor aproximado de la variable encontrado de sustituir los valores aproximados encontrados

        aproximacionVariables[letra1] = round(efeDeVariable, numDecimales)

    print(aproximacionVariables)
    print(aproximacionVariablesAnterior)



print("Los resultados obtenidos son: \n")

print(aproximacionVariables)

print(f"Completado en {contadorCiclo} iteraciones")
        
        

